<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>üîç Verificar Dados do Funcion√°rio</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: Arial, sans-serif;
            background: #1a1a1a;
            color: #fff;
            padding: 20px;
        }
        .container {
            max-width: 700px;
            margin: 0 auto;
            background: #2a2a2a;
            padding: 30px;
            border-radius: 12px;
            border: 3px solid #00ff00;
        }
        h1 {
            color: #00ff00;
            text-align: center;
            margin-bottom: 20px;
            font-size: 24px;
        }
        .box {
            background: #1a1a1a;
            padding: 20px;
            margin: 15px 0;
            border-radius: 8px;
            border: 2px solid #444;
        }
        .box.ok { border-color: #00ff00; }
        .box.erro { border-color: #ff0000; }
        .box.aviso { border-color: #ffaa00; }
        .titulo {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #00ff00;
        }
        .dados {
            font-family: monospace;
            font-size: 14px;
            line-height: 1.8;
            background: #000;
            padding: 15px;
            border-radius: 6px;
            margin: 10px 0;
        }
        .destaque {
            color: #00ff00;
            font-weight: bold;
            font-size: 16px;
        }
        .erro-txt { color: #ff6666; }
        .ok-txt { color: #00ff00; }
        .aviso-txt { color: #ffaa00; }
        button {
            background: #00ff00;
            color: #000;
            border: none;
            padding: 15px 30px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            border-radius: 6px;
            margin: 10px 5px;
            transition: all 0.2s;
        }
        button:hover {
            background: #00cc00;
            transform: scale(1.05);
        }
        button.perigo {
            background: #ff0000;
            color: #fff;
        }
        button.perigo:hover {
            background: #cc0000;
        }
        .input-group {
            margin: 15px 0;
        }
        .input-group label {
            display: block;
            color: #00ff00;
            margin-bottom: 5px;
            font-weight: bold;
        }
        .input-group input {
            width: 100%;
            padding: 12px;
            background: #000;
            border: 2px solid #00ff00;
            color: #00ff00;
            font-size: 16px;
            border-radius: 6px;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç VERIFICADOR DE DADOS DO FUNCION√ÅRIO</h1>
        
        <!-- Status -->
        <div id="status-container"></div>

        <!-- Dados do Funcion√°rio C√≥digo 1 -->
        <div id="dados-func-1"></div>

        <!-- Corrigir Dados -->
        <div class="box" style="border-color: #00ff00;">
            <div class="titulo">üîß CORRIGIR/CRIAR FUNCION√ÅRIO C√ìDIGO 1</div>
            
            <div class="input-group">
                <label>Nome:</label>
                <input type="text" id="nome" value="Funcion√°rio Teste">
            </div>

            <div class="input-group">
                <label>Login:</label>
                <input type="text" id="login" value="0">
            </div>

            <div class="input-group">
                <label>Senha:</label>
                <input type="text" id="senha" value="0">
            </div>

            <div class="input-group">
                <label>Email:</label>
                <input type="text" id="email" value="teste@cartorio.com">
            </div>

            <div class="input-group">
                <label>CPF:</label>
                <input type="text" id="cpf" value="000.000.000-00">
            </div>

            <button onclick="corrigirOuCriar()" style="width: 100%;">
                ‚úÖ CORRIGIR/CRIAR AGORA
            </button>

            <div id="resultado-correcao"></div>
        </div>

        <!-- A√ß√µes -->
        <div style="text-align: center; margin-top: 20px;">
            <button onclick="verificar()">üîÑ ATUALIZAR</button>
            <button onclick="testarLogin()">üîê TESTAR LOGIN</button>
            <button onclick="exportar()">üì• EXPORTAR</button>
        </div>
    </div>

    <script>
        function verificar() {
            const statusDiv = document.getElementById('status-container')
            const dadosDiv = document.getElementById('dados-func-1')
            
            const funcionarios = localStorage.getItem('funcionarios-cadastrados')
            
            if (!funcionarios) {
                statusDiv.innerHTML = `
                    <div class="box erro">
                        <div class="titulo erro-txt">‚ùå NENHUM FUNCION√ÅRIO CADASTRADO!</div>
                        <p style="margin-top: 10px;">O localStorage est√° vazio.</p>
                        <p style="margin-top: 10px;">Use o formul√°rio abaixo para criar o funcion√°rio.</p>
                    </div>
                `
                dadosDiv.innerHTML = ''
                return
            }

            let lista = []
            try {
                lista = JSON.parse(funcionarios)
            } catch (error) {
                statusDiv.innerHTML = `
                    <div class="box erro">
                        <div class="titulo erro-txt">‚ùå ERRO AO LER DADOS!</div>
                        <p style="margin-top: 10px;">JSON inv√°lido no localStorage.</p>
                        <pre style="margin-top: 10px; color: #ff6666;">${error.message}</pre>
                    </div>
                `
                return
            }

            statusDiv.innerHTML = `
                <div class="box ok">
                    <div class="titulo ok-txt">‚úÖ ${lista.length} FUNCION√ÅRIO(S) CADASTRADO(S)</div>
                </div>
            `

            // Buscar funcion√°rio c√≥digo 1
            const func1 = lista.find(f => f.codigo === '1' || f.codigo === 1)
            
            if (!func1) {
                dadosDiv.innerHTML = `
                    <div class="box aviso">
                        <div class="titulo aviso-txt">‚ö†Ô∏è FUNCION√ÅRIO C√ìDIGO 1 N√ÉO ENCONTRADO</div>
                        <p style="margin-top: 10px;">Funcion√°rios cadastrados:</p>
                        <div class="dados">
${lista.map((f, i) => `${i+1}. C√≥digo: ${f.codigo} | Nome: ${f.nome}`).join('\n')}
                        </div>
                        <p style="margin-top: 10px;">Use o formul√°rio abaixo para criar o c√≥digo 1.</p>
                    </div>
                `
                return
            }

            // Mostrar dados do funcion√°rio c√≥digo 1
            const temLogin = func1.login !== undefined && func1.login !== null && String(func1.login).trim() !== ''
            const temSenha = func1.senha !== undefined && func1.senha !== null && String(func1.senha).trim() !== ''
            const podeLogar = temLogin && temSenha

            dadosDiv.innerHTML = `
                <div class="box ${podeLogar ? 'ok' : 'erro'}">
                    <div class="titulo ${podeLogar ? 'ok-txt' : 'erro-txt'}">
                        ${podeLogar ? '‚úÖ' : '‚ùå'} FUNCION√ÅRIO C√ìDIGO 1
                    </div>
                    
                    <div class="dados">
C√≥digo: ${func1.codigo}
Nome: ${func1.nome || 'N√ÉO DEFINIDO'}
Login: "${func1.login}" ${temLogin ? '‚úÖ' : '‚ùå VAZIO'}
Senha: "${func1.senha}" ${temSenha ? '‚úÖ' : '‚ùå VAZIO'}
Email: ${func1.email || 'N√ÉO DEFINIDO'}
CPF: ${func1.cpf || 'N√ÉO DEFINIDO'}

<span class="destaque ${podeLogar ? 'ok-txt' : 'erro-txt'}">
STATUS: ${podeLogar ? '‚úÖ‚úÖ PODE LOGAR!' : '‚ùå‚ùå N√ÉO PODE LOGAR!'}
</span>

${!podeLogar ? '<span class="erro-txt">‚ö†Ô∏è FALTA LOGIN E/OU SENHA!</span>' : ''}
                    </div>

                    ${podeLogar ? `
                        <div style="margin-top: 15px; padding: 15px; background: #004400; border-radius: 6px;">
                            <strong class="ok-txt">‚úÖ PARA FAZER LOGIN USE:</strong><br><br>
                            <div class="dados" style="background: #003300;">
Login: <span class="destaque">${func1.login}</span>
Senha: <span class="destaque">${func1.senha}</span>
Perfil: <span class="destaque">Funcion√°rio</span>
                            </div>
                        </div>
                    ` : ''}
                </div>
            `
        }

        function corrigirOuCriar() {
            const divResultado = document.getElementById('resultado-correcao')
            
            const nome = document.getElementById('nome').value
            const login = document.getElementById('login').value
            const senha = document.getElementById('senha').value
            const email = document.getElementById('email').value
            const cpf = document.getElementById('cpf').value

            if (!nome || !login || !senha) {
                divResultado.innerHTML = '<div class="dados erro-txt" style="margin-top: 15px;">‚ùå Preencha pelo menos Nome, Login e Senha!</div>'
                return
            }

            const funcionarios = localStorage.getItem('funcionarios-cadastrados')
            let lista = funcionarios ? JSON.parse(funcionarios) : []

            // Buscar funcion√°rio c√≥digo 1
            const index = lista.findIndex(f => f.codigo === '1' || f.codigo === 1)

            const funcionario = {
                codigo: '1',
                nome: nome,
                login: login,
                senha: senha,
                email: email,
                cpf: cpf,
                emAtividade: true,
                id: Date.now().toString(),
                // Campos padr√£o
                ordemSinalPublico: '',
                nomeMin: '',
                prenome: '',
                endereco: '',
                bairro: '',
                cidade: '',
                cep: '',
                telefone: '',
                uf: '',
                celular: '',
                nascimento: '',
                rg: '',
                mae: '',
                pai: '',
                cargo: '',
                assinante: false,
                cargoMin: '',
                cargoCivil: '',
                cargoMin2: '',
                salario: '',
                comissao: '',
                admissao: '',
                demissao: '',
                observacao: ''
            }

            if (index >= 0) {
                // ATUALIZAR
                lista[index] = { ...lista[index], ...funcionario }
                divResultado.innerHTML = '<div class="dados ok-txt" style="margin-top: 15px;">‚úÖ FUNCION√ÅRIO C√ìDIGO 1 ATUALIZADO!</div>'
            } else {
                // CRIAR
                lista.push(funcionario)
                divResultado.innerHTML = '<div class="dados ok-txt" style="margin-top: 15px;">‚úÖ FUNCION√ÅRIO C√ìDIGO 1 CRIADO!</div>'
            }

            localStorage.setItem('funcionarios-cadastrados', JSON.stringify(lista))
            
            setTimeout(() => {
                divResultado.innerHTML += '<div class="dados ok-txt">üíæ Salvo no localStorage!</div>'
                setTimeout(() => {
                    verificar()
                }, 500)
            }, 500)
        }

        function testarLogin() {
            const login = document.getElementById('login').value
            const senha = document.getElementById('senha').value

            const funcionarios = localStorage.getItem('funcionarios-cadastrados')
            if (!funcionarios) {
                alert('‚ùå Nenhum funcion√°rio cadastrado!')
                return
            }

            const lista = JSON.parse(funcionarios)
            const encontrado = lista.find(f => 
                String(f.login).toLowerCase() === String(login).toLowerCase() ||
                (f.email && String(f.email).toLowerCase() === String(login).toLowerCase())
            )

            if (!encontrado) {
                alert(`‚ùå FUNCION√ÅRIO N√ÉO ENCONTRADO!\n\nLogin buscado: "${login}"\n\nLogins dispon√≠veis:\n${lista.map(f => `- "${f.login}"`).join('\n')}`)
                return
            }

            if (String(encontrado.senha) === String(senha)) {
                alert(`‚úÖ‚úÖ‚úÖ LOGIN V√ÅLIDO! ‚úÖ‚úÖ‚úÖ\n\nFuncion√°rio: ${encontrado.nome}\nLogin: ${encontrado.login}\nSenha: ${encontrado.senha}\n\nVoc√™ PODE fazer login no sistema!\n\nUse:\nLogin: ${encontrado.login}\nSenha: ${encontrado.senha}\nPerfil: Funcion√°rio`)
            } else {
                alert(`‚ùå SENHA INCORRETA!\n\nSenha cadastrada: "${encontrado.senha}"\nSenha que voc√™ digitou: "${senha}"\n\nElas N√ÉO s√£o iguais!`)
            }
        }

        function exportar() {
            const funcionarios = localStorage.getItem('funcionarios-cadastrados')
            if (!funcionarios) {
                alert('‚ùå Nenhum dado para exportar!')
                return
            }

            const blob = new Blob([funcionarios], { type: 'application/json' })
            const link = document.createElement('a')
            link.href = URL.createObjectURL(blob)
            link.download = 'funcionarios.json'
            link.click()
            
            alert('‚úÖ Dados exportados para Downloads!')
        }

        // Verificar ao carregar
        window.onload = verificar
    </script>
</head>
<body>
    <div class="container">
        <h1>üîç VERIFICADOR DE FUNCION√ÅRIO</h1>
        
        <div id="status-container"></div>
        <div id="dados-func-1"></div>
        
        <div style="text-align: center; margin: 30px 0;">
            <p style="font-size: 14px; color: #888;">Use os bot√µes abaixo:</p>
        </div>
    </div>
</body>
</html>

